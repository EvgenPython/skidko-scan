{% extends "base.html" %}

{% block title %}
Поиск: {{ search_query }} — SkidkoScan
{% endblock %}

{% block content %}

<h1 class="page-title">Результаты поиска: “{{ search_query }}”</h1>

{% if products %}
    <div class="products-grid">
        {% for product in products %}
            <article class="product-card">
                <a href="{% url 'product_detail' product.id %}" class="product-link">

                    <div class="product-image-wrapper">
                        {% if product.image_url %}
                            <img src="{{ product.image_url }}"
                                 alt="{{ product.title_ru|default:product.title_en }}"
                                 class="product-image">
                        {% else %}
                            <div class="product-image placeholder">
                                Нет изображения
                            </div>
                        {% endif %}
                    </div>

                    <div class="product-info">
                        <h2 class="product-title">
                            {{ product.title_ru|default:product.title_en }}
                        </h2>

                        <div class="product-prices">
                            <span class="product-price">
                                {{ product.price }} {{ product.currency }}
                            </span>

                            {% if product.old_price and product.old_price > product.price %}
                                <span class="product-old-price">
                                    {{ product.old_price }} {{ product.currency }}
                                </span>
                                <span class="product-discount-badge">Скидка</span>
                            {% endif %}
                        </div>
                    </div>

                </a>
            </article>
        {% endfor %}
    </div>

{% else %}
    <p>Ничего не найдено.</p>
{% endif %}

{% endblock %}
